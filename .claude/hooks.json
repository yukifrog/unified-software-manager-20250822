{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash.*rm -rf",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'âš ï¸  Dangerous command detected: rm -rf. Proceeding with caution...'"
          }
        ]
      },
      {
        "matcher": "Bash.*sudo",
        "hooks": [
          {
            "type": "command", 
            "command": "echo 'ğŸ” Privileged command detected: sudo. Ensure this is necessary.'"
          }
        ]
      },
      {
        "matcher": "Bash.*chmod.*777",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'âš ï¸  Security warning: chmod 777 detected. Consider more restrictive permissions.'"
          }
        ]
      },
      {
        "matcher": "Edit.*(tools\\.yaml|CLAUDE\\.md|TODO\\.md)",
        "hooks": [
          {
            "type": "command",
            "command": "mkdir -p ~/.claude-backups && cp \"$TOOL_RESULT_FILE_PATH\" ~/.claude-backups/\"$(basename \"$TOOL_RESULT_FILE_PATH\")\".backup.$(date +%Y%m%d_%H%M%S) && echo 'ğŸ’¾ Critical file backup created: ~/.claude-backups/$(basename \"$TOOL_RESULT_FILE_PATH\").backup.$(date +%Y%m%d_%H%M%S)'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*(tools\\.yaml|CLAUDE\\.md|TODO\\.md)",
        "hooks": [
          {
            "type": "command",
            "command": "mkdir -p ~/.claude-backups && cp \"$TOOL_RESULT_FILE_PATH\" ~/.claude-backups/\"$(basename \"$TOOL_RESULT_FILE_PATH\")\".backup.$(date +%Y%m%d_%H%M%S) && echo 'ğŸ’¾ Critical file backup created: ~/.claude-backups/$(basename \"$TOOL_RESULT_FILE_PATH\").backup.$(date +%Y%m%d_%H%M%S)'"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit.*\\.sh$",
        "hooks": [
          {
            "type": "command",
            "command": "shellcheck \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… ShellCheck passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.sh$", 
        "hooks": [
          {
            "type": "command",
            "command": "shellcheck \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… ShellCheck passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "Edit.*\\.ya?ml$",
        "hooks": [
          {
            "type": "command",
            "command": "yamllint \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… YAML validation passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.ya?ml$",
        "hooks": [
          {
            "type": "command", 
            "command": "yamllint \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… YAML validation passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "Edit.*\\.json$",
        "hooks": [
          {
            "type": "command",
            "command": "jq empty \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… JSON validation passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.json$",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && jq empty \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… JSON validation passed for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "Edit.*\\.md$",
        "hooks": [
          {
            "type": "command",
            "command": "command -v markdownlint >/dev/null && markdownlint \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… Markdown validation passed for $TOOL_RESULT_FILE_PATH' || echo 'âš ï¸ markdownlint not found, skipping validation for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.md$",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && command -v markdownlint >/dev/null && markdownlint \"$TOOL_RESULT_FILE_PATH\" && echo 'âœ… Markdown validation passed for $TOOL_RESULT_FILE_PATH' || echo 'âš ï¸ markdownlint not found, skipping validation for $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "Edit.*\\.(sh|yaml|yml|json|md|py|js|ts)",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && command -v gitleaks >/dev/null && gitleaks detect --source=\"$TOOL_RESULT_FILE_PATH\" --verbose 2>&1 | grep -E '(Secret|Key|Token|Password)' && echo 'ğŸ” Secret scan completed for $TOOL_RESULT_FILE_PATH' || echo 'âœ… No secrets detected in $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.(sh|yaml|yml|json|md|py|js|ts)",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && command -v gitleaks >/dev/null && gitleaks detect --source=\"$TOOL_RESULT_FILE_PATH\" --verbose 2>&1 | grep -E '(Secret|Key|Token|Password)' && echo 'ğŸ” Secret scan completed for $TOOL_RESULT_FILE_PATH' || echo 'âœ… No secrets detected in $TOOL_RESULT_FILE_PATH'"
          }
        ]
      },
      {
        "matcher": "Edit.*\\.sh$",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && [ -d tests/ ] && command -v bats >/dev/null && echo 'ğŸ§ª Running tests after shell script modification...' && bats tests/ && echo 'âœ… All tests passed' || echo 'âš ï¸ Tests not available or skipped'"
          }
        ]
      },
      {
        "matcher": "MultiEdit.*\\.sh$",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && [ -d tests/ ] && command -v bats >/dev/null && echo 'ğŸ§ª Running tests after shell script modification...' && bats tests/ && echo 'âœ… All tests passed' || echo 'âš ï¸ Tests not available or skipped'"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && git status --porcelain | wc -l | awk '{if($1>3) print \"ğŸ’¡ è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ¤œå‡º (\"$1\"å€‹) - commitã‚’æ¤œè¨ã—ã¦ãã ã•ã„\"}'"
          },
          {
            "type": "command",
            "command": "[ ! -f ~/.claude-session-start ] && echo $(date +%s) > ~/.claude-session-start || { DURATION=$(($(date +%s) - $(cat ~/.claude-session-start))); [ $DURATION -gt 3600 ] && echo \"â° ä½œæ¥­é–‹å§‹ã‹ã‚‰$(($DURATION/60))åˆ†çµŒé - ä¼‘æ†©ã‚’æ¤œè¨ã—ã¦ãã ã•ã„\" || true; }"
          },
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && [ \"$CLAUDE_NOTIFY_ENABLED\" = \"true\" ] && command -v gh >/dev/null && gh run list --limit 5 --json status,conclusion,name 2>/dev/null | jq -r '.[] | select(.conclusion==\"failure\") | \"ğŸ”´ CIå¤±æ•—æ¤œå‡º: \" + .name' | head -3 || true"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "echo $(date +%s) > ~/.claude-session-start && echo 'ğŸš€ Claude Code ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹: $(date)' && [ \"$CLAUDE_NOTIFY_ENABLED\" = \"true\" ] && [ -n \"$TELEGRAM_BOT_TOKEN\" ] && [ -n \"$TELEGRAM_CHAT_ID\" ] && cd /home/yuuki/app_updater && ./claude_notify.sh \"ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹\" || true"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "[ -f ~/.claude-session-start ] && DURATION=$(($(date +%s) - $(cat ~/.claude-session-start))) && echo \"ğŸ“Š ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†: $(($DURATION/60))åˆ†é–“ä½œæ¥­\" && rm -f ~/.claude-session-start && [ \"$CLAUDE_NOTIFY_ENABLED\" = \"true\" ] && [ -n \"$TELEGRAM_BOT_TOKEN\" ] && [ -n \"$TELEGRAM_CHAT_ID\" ] && cd /home/yuuki/app_updater && ./claude_notify.sh \"ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†: $(($DURATION/60))åˆ†é–“ä½œæ¥­\" || true"
          },
          {
            "type": "command",
            "command": "cd /home/yuuki/app_updater && [ -f TODO.md ] && echo \"\\n## $(date '+%Y-%m-%d %H:%M:%S') ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†\" >> TODO.md && git status --porcelain | wc -l | awk '{print \"- å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«æ•°: \" $1}' >> TODO.md && echo 'ğŸ“ TODO.md ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ­ã‚°æ›´æ–°å®Œäº†' || true"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "[ \"$CLAUDE_NOTIFY_ENABLED\" = \"true\" ] && [ -n \"$1\" ] && echo \"ğŸ”” é€šçŸ¥: $1\" && [ -n \"$TELEGRAM_BOT_TOKEN\" ] && [ -n \"$TELEGRAM_CHAT_ID\" ] && cd /home/yuuki/app_updater && ./claude_notify.sh \"$1\" || true"
          }
        ]
      }
    ]
  }
}
