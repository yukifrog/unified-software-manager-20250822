# ツール自動更新監視設定
# GitHub Actions で日次実行され、バージョン更新時に自動PR作成

metadata:
  version: "1.0.0"
  last_updated: "2025-08-23"
  description: "Dependabot対象外ツールの自動更新設定"

# GitHub API設定
github_api:
  rate_limit_per_hour: 5000  # 認証済みAPI制限
  cache_duration_hours: 6  # バージョン情報キャッシュ時間

# 監視対象ツール定義
tools:
# Kubernetes関連 - 無効化
# kubectl:
  #   current_version: "not_installed"
  #   github_repo: "kubernetes/kubernetes"
  #   update_method: "binary_download"
  #   install_command: "curl -LO https://dl.k8s.io/release/v{version}/bin/linux/amd64/kubectl"
  #   category: "kubernetes"
  #   priority: "high"
  #
  # helm:
  #   current_version: "not_installed"
  #   github_repo: "helm/helm"
  #   update_method: "binary_download"
  #   category: "kubernetes"
  #   priority: "high"

  # kind:
  #   current_version: "0.17.0"
  #   github_repo: "kubernetes-sigs/kind"
  #   update_method: "binary_download"
  #   category: "kubernetes"
  #   priority: "medium"

  # k9s:
  #   current_version: "0.26.0"
  #   github_repo: "derailed/k9s"
  #   update_method: "binary_download"
  #   category: "kubernetes"
  #   priority: "medium"

  # HashiCorp Tools
terraform:
  current_version: "not_installed"
  github_repo: "hashicorp/terraform"
  update_method: "binary_download"
  category: "infrastructure"
  priority: "high"

vault:
  current_version: "1.12.0"
  github_repo: "hashicorp/vault"
  update_method: "binary_download"
  category: "infrastructure"
  priority: "medium"

consul:
  current_version: "1.14.0"
  github_repo: "hashicorp/consul"
  update_method: "binary_download"
  category: "infrastructure"
  priority: "low"

nomad:
  current_version: "1.4.0"
  github_repo: "hashicorp/nomad"
  update_method: "binary_download"
  category: "infrastructure"
  priority: "low"

# CLI Tools
gh:
  current_version: "2.78.0"
  github_repo: "cli/cli"
  update_method: "binary_download"
  category: "cli"
  priority: "high"

jq:
  current_version: "1.8.1"
  github_repo: "jqlang/jq"
  update_method: "binary_download"
  install_command: "curl -L https://github.com/jqlang/jq/releases/download/jq-{version}/jq-linux-amd64
    -o /usr/local/bin/jq && chmod +x /usr/local/bin/jq"
  category: "cli"
  priority: "high"

yq:
  current_version: "4.47.1"
  github_repo: "mikefarah/yq"
  update_method: "binary_download"
  category: "cli"
  priority: "medium"

fzf:
  current_version: "0.65.1"
  github_repo: "junegunn/fzf"
  update_method: "binary_download"
  category: "cli"
  priority: "medium"

  # Modern CLI replacements
bat:
  current_version: "0.25.0"
  github_repo: "sharkdp/bat"
  update_method: "binary_download"
  category: "cli"
  priority: "low"

fd:
  current_version: "10.3.0"
  github_repo: "sharkdp/fd"
  update_method: "binary_download"
  category: "cli"
  priority: "low"

ripgrep:
  current_version: "14.1.1"
  github_repo: "BurntSushi/ripgrep"
  update_method: "binary_download"
  category: "cli"
  priority: "medium"

eza:
  current_version: "0.23.0"
  github_repo: "eza-community/eza"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/eza-community/eza/releases/download/v{version}/eza_x86_64-unknown-linux-gnu.tar.gz
    | tar xzf - -C /tmp && mv /tmp/eza ~/.local/bin/
  category: "cli"
  priority: "medium"

zoxide:
  current_version: "0.9.8"
  github_repo: "ajeetdsouza/zoxide"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/ajeetdsouza/zoxide/releases/download/v{version}/\
      zoxide-{version}-x86_64-unknown-linux-musl.tar.gz |
    tar xzf - -C /tmp && mv /tmp/zoxide ~/.local/bin/
  category: "cli"
  priority: "high"

starship:
  current_version: "1.23.0"
  github_repo: "starship/starship"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/starship/starship/releases/download/v{version}/starship-x86_64-unknown-linux-gnu.tar.gz
    | tar xzf - -C /tmp && mv /tmp/starship ~/.local/bin/
  category: "terminal"
  priority: "high"

httpie:
  current_version: "3.2.4"
  github_repo: "httpie/httpie"
  update_method: "pip_install"
  install_command: "pip install --user httpie"
  category: "development"
  priority: "high"

direnv:
  current_version: "2.37.1"
  github_repo: "direnv/direnv"
  update_method: "binary_download"
  install_command: "curl -L https://github.com/direnv/direnv/releases/download/v{version}/direnv.linux-amd64
    -o ~/.local/bin/direnv && chmod +x ~/.local/bin/direnv"
  category: "development"
  priority: "high"

watchexec:
  current_version: "not_installed"
  github_repo: "watchexec/watchexec"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/watchexec/watchexec/releases/download/v{version}/\
      watchexec-{version}-x86_64-unknown-linux-musl.tar.xz |
    tar xJf - -C /tmp && mv /tmp/watchexec-{version}-x86_64-unknown-linux-musl/watchexec ~/.local/bin/
  category: "development"
  priority: "medium"

btop:
  current_version: "1.4.4"
  github_repo: "aristocratos/btop"
  update_method: "binary_download"
  install_command: "curl -L https://github.com/aristocratos/btop/releases/download/v{version}/btop-x86_64-linux-musl.tbz
    | tar xjf - -C /tmp && mv /tmp/btop/bin/btop ~/.local/bin/"
  category: "system"
  priority: "high"

dust:
  current_version: "not_installed"
  github_repo: "bootandy/dust"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/bootandy/dust/releases/download/v{version}/\
      dust-v{version}-x86_64-unknown-linux-musl.tar.gz |
    tar xzf - -C /tmp && mv /tmp/dust-v{version}-x86_64-unknown-linux-musl/dust ~/.local/bin/
  category: "system"
  priority: "medium"

bandwhich:
  current_version: "0.23.1"
  github_repo: "imsnif/bandwhich"
  update_method: "binary_download"
  install_command: >
    curl -L https://github.com/imsnif/bandwhich/releases/download/v{version}/\
      bandwhich-v{version}-x86_64-unknown-linux-musl.tar.gz |
    tar xzf - -C /tmp && mv /tmp/bandwhich ~/.local/bin/
  category: "system"
  priority: "low"

delta:
  current_version: "0.18.2"
  github_repo: "dandavison/delta"
  update_method: "binary_download"
  category: "cli"
  priority: "low"

  # Development Tools
lazygit:
  current_version: "0.54.2"
  github_repo: "jesseduffield/lazygit"
  update_method: "binary_download"
  category: "development"
  priority: "medium"

  # hugo:
  #   current_version: "0.108.0"
  #   github_repo: "gohugoio/hugo"
  #   update_method: "binary_download"
  #   category: "development"
  #   priority: "low"

  # Container Tools
dive:
  current_version: "0.10.0"
  github_repo: "wagoodman/dive"
  update_method: "binary_download"
  category: "containers"
  priority: "medium"

ctop:
  current_version: "0.7.7"
  github_repo: "bcicen/ctop"
  update_method: "binary_download"
  category: "containers"
  priority: "low"

  # Language Runtimes (version manager managed)
nodejs:
  current_version: "24.6.0"
  github_repo: "nodejs/node"
  update_method: "version_manager"
  version_manager: "nvm"
  category: "runtime"
  priority: "high"

golang:
  current_version: "1.19.0"
  github_repo: "golang/go"
  update_method: "version_manager"
  version_manager: "asdf"
  category: "runtime"
  priority: "high"

python:
  current_version: "3.11.0"
  github_repo: "python/cpython"
  update_method: "version_manager"
  version_manager: "asdf"
  category: "runtime"
  priority: "high"

rust:
  current_version: "1.65.0"
  github_repo: "rust-lang/rust"
  update_method: "version_manager"
  version_manager: "asdf"
  category: "runtime"
  priority: "medium"

  # Version Managers
nvm:
  current_version: "0.40.1"
  github_repo: "nvm-sh/nvm"
  update_method: "git_update"
  install_path: "~/.nvm"
  update_command: "cd ~/.nvm && git fetch --tags && git checkout $(git describe
    --abbrev=0 --tags)"
  category: "version_manager"
  priority: "medium"

  # AI/ML Tools
ollama:
  current_version: "0.11.7"
  github_repo: "ollama/ollama"
  update_method: "binary_download"
  category: "ai"
  priority: "medium"

gemini-cli:
  current_version: "0.1.22"
  github_repo: "google-gemini/gemini-cli"
  npm_package: "@google/gemini-cli"
  update_method: "npm_global"
  install_command: "npm install -g @google/gemini-cli"
  category: "ai"
  priority: "high"

# PR作成設定
pr_settings:
  branch_prefix: "deps/update-"
  title_format: "deps: update {tool} from v{old_version} to v{new_version}"
  labels:
    - "dependencies"
    - "automated-pr"
  draft: true  # Draft PRとして作成（手動レビュー推奨）
  auto_merge: false

# 通知設定
notifications:
  create_issues: false  # Issue作成は無効
  github_notifications: true  # GitHub標準通知を使用
